// jQuery.XDomainRequest.js
// Author: Jason Moon - @JSONMOON
// IE8+
if(!jQuery.support.cors&&window.XDomainRequest){var httpRegEx=/^https?:\/\//i;var getOrPostRegEx=/^get|post$/i;var sameSchemeRegEx=new RegExp("^"+location.protocol,"i");var xmlRegEx=/\/xml/i;jQuery.ajaxTransport("text html xml json",function(a,b,c){if(a.crossDomain&&a.async&&getOrPostRegEx.test(a.type)&&httpRegEx.test(b.url)&&sameSchemeRegEx.test(b.url)){var d=null;var e=(b.dataType||"").toLowerCase();return{send:function(c,f){d=new XDomainRequest;if(/^\d+$/.test(b.timeout)){d.timeout=b.timeout}d.ontimeout=function(){f(500,"timeout")};d.onload=function(){var a="Content-Length: "+d.responseText.length+"\r\nContent-Type: "+d.contentType;var b={code:200,message:"success"};var c={text:d.responseText};try{if(e==="json"){try{c.json=JSON.parse(d.responseText)}catch(g){b.code=500;b.message="parseerror"}}else if(e==="xml"||e!=="text"&&xmlRegEx.test(d.contentType)){var h=new ActiveXObject("Microsoft.XMLDOM");h.async=false;try{h.loadXML(d.responseText)}catch(g){h=undefined}if(!h||!h.documentElement||h.getElementsByTagName("parsererror").length){b.code=500;b.message="parseerror";throw"Invalid XML: "+d.responseText}c.xml=h}}catch(i){throw i}finally{f(b.code,b.message,c,a)}};d.onerror=function(){f(500,"error",{text:d.responseText})};d.open(a.type,a.url);d.send()},abort:function(){if(d){d.abort()}}}}})}